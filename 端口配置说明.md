# 四会项目端口配置说明

## 端口分配

| 服务 | 端口 | 访问地址 | 说明 |
|------|------|----------|------|
| **管理端** | 5173 | http://localhost:5173 | Next.js管理后台 |
| **后端API** | 8080 | http://localhost:8080 | Spring Boot后端服务 |
| **小程序端** | 3000 | http://localhost:3000 | uni-app H5版本 |

## 配置文件修改

### 1. 管理端 (admin-dashboard_3)
- **文件**: `package.json`
- **修改**: 
  ```json
  "scripts": {
    "dev": "next dev -p 5173",
    "start": "next start -p 5173"
  }
  ```

### 2. 后端 (sihui-backend)
- **文件**: `src/main/resources/application.properties`
- **配置**: `server.port=8080` ✅ (已配置)

### 3. 小程序端 (sihui-wx)
- **文件**: `vite.config.js`
- **新增配置**:
  ```javascript
  export default defineConfig({
    plugins: [uni()],
    server: {
      port: 3000,
      host: '0.0.0.0',
      open: true
    }
  })
  ```

### 4. Docker配置调整
- **文件**: `docker-compose.yml`
- **修改**: Grafana端口从3000改为3001，避免与小程序端冲突

## 快速启动

### 方式一：使用启动脚本 (推荐)
```powershell
# 启动所有服务
.\scripts\start-all-services.ps1

# 停止所有服务  
.\scripts\stop-all-services.ps1
```

### 方式二：手动启动
```powershell
# 启动后端 (8080端口)
cd sihui-backend
.\mvnw.cmd spring-boot:run

# 启动管理端 (5173端口)
cd admin-dashboard_3  
npm run dev

# 启动小程序端 (3000端口)
cd sihui-wx
npm run dev:h5
```

## 注意事项

1. **端口冲突检查**: 启动前请确保这些端口未被其他程序占用
2. **防火墙设置**: 如需外网访问，请开放对应端口
3. **API配置**: 前端项目需要正确配置后端API地址 (http://localhost:8080)
4. **数据库连接**: 后端启动前请确保MySQL数据库正常运行

## 常见问题

### Q: 端口被占用怎么办？
A: 使用停止脚本 `.\scripts\stop-all-services.ps1` 或手动杀死进程

### Q: 如何修改端口？
A: 修改对应配置文件后重启服务

### Q: Docker环境下的端口映射？
A: Docker配置已同步更新，运行 `docker-compose up` 即可

---
*最后更新时间: ${new Date().toLocaleString('zh-CN')}* 